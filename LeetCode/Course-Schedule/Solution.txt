class Solution {
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        ArrayList<ArrayList<Integer>> adj=new ArrayList<>();
        for(int i=0;i<numCourses;i++){adj.add(new ArrayList<>());}
        for(int []val:prerequisites){
            adj.get(val[0]).add(val[1]);
        }
        boolean []visited=new boolean[numCourses];
        boolean []path=new boolean[numCourses];
        for(int i=0;i<numCourses;i++){
            if(visited[i]==false){
                if((dfs(adj,visited,path,i))){return false;}
            }
        }
        return true;
    }
    public static boolean dfs(ArrayList<ArrayList<Integer>> adj,boolean []visited, boolean []path,int index){
        visited[index]=true;path[index]=true;
        for(int val:adj.get(index)){
            if(visited[val]==false){
                visited[index]=true;path[index]=true;
                 if((dfs(adj,visited,path,val))){return true;}
            }else if(path[val]==true){
                 return true;
            }
        }
        path[index]=false;
        return false;
    }
}